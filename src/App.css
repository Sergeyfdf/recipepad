:root{
  /* Цвета (светлая тема) */
  --bg: #f6f7f9;
  --bg-soft: #ffffff;
  --ink: #0f1115;
  --muted: #667085;
  --border: #e6e8ec;
  --primary: #111827;
  --primary-ink: #ffffff;
  --accent: #2563eb;
  --amber: #f59e0b;
  --ring: #94a3b8;

  /* Радиусы, тени, размеры */
  --r-sm: 10px; --r-md: 14px; --r-lg: 18px; --r-xl: 22px;
  --shadow-1: 0 1px 2px rgba(0,0,0,.05);
  --shadow-2: 0 6px 18px rgba(17,24,39,.08);
}
:root[data-theme="dark"]{
  --bg: #0a0b0d;
  --bg-soft: #101214;
  --ink: #eef2f7;
  --muted: #9aa3af;
  --border: #1e2229;
  --primary: #fafafa;
  --primary-ink: #0a0b0d;
  --accent: #60a5fa;
  --amber: #fbbf24;
  --ring: #475569;
}

*{box-sizing:border-box}
html{font-size:clamp(15px, 1vw + 12px, 18px)}
html,body,#root{height:100%}
body{margin:0;background:linear-gradient(180deg, var(--bg) 0%, var(--bg) 60%, var(--bg-soft) 100%);color:var(--ink);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica Neue,Arial;transition:background-color .25s,color .25s}

img{display:block;max-width:100%;height:auto}
button,input,textarea{font:inherit;color:inherit}
button{-webkit-appearance:none;appearance:none;border:0;background:transparent;padding:0}
::selection{background:rgba(37,99,235,.2)}

/* === ЛЕЙАУТ ============================================================ */
.app{min-height:100%;display:flex;flex-direction:column}
.container{width:100%;max-width:min(1100px, 92vw);margin:0 auto;padding:0 clamp(12px, 2vw, 20px)}
.main{padding:clamp(16px,2vw,24px) clamp(12px,2vw,20px) 96px}

/* === ШАПКА ============================================================== */
.header{position:sticky;top:0;z-index:20;background:rgba(255,255,255,.7);backdrop-filter:saturate(120%) blur(10px);border-bottom:1px solid var(--border)}
:root[data-theme="dark"] .header{background:rgba(10,11,13,.55)}
.header__inner{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
.brand{font-weight:800;letter-spacing:.2px;font-size:clamp(18px, 1.2vw + 12px, 22px)}
.header__actions{display:flex;gap:8px}

/* === КНОПКИ ============================================================= */
.btn{appearance:none;border:1px solid var(--border);background:var(--bg-soft);color:var(--ink);padding:10px 14px;border-radius:var(--r-md);cursor:pointer;transition:transform .15s ease, box-shadow .15s ease, background-color .25s ease}
.btn:hover{transform:translateY(-1px);box-shadow:var(--shadow-1)}
.btn:active{transform:translateY(0)}
.btn:focus-visible{outline:none;box-shadow:0 0 0 3px color-mix(in oklab, var(--ring) 40%, transparent)}
.btn-ghost{background:transparent}
.btn-primary{background:var(--primary);color:var(--primary-ink);border-color:var(--primary)}
.btn-amber{border-color:var(--green);color:var(--green)}
.grow{flex:1}
.hide-sm{display:none}
@media(min-width:640px){.hide-sm{display:inline-flex}}

.icon{width:18px;height:18px}
.iconbtn{border:none;background:transparent;color:var(--muted);padding:8px;border-radius:var(--r-sm);cursor:pointer;transition:background-color .2s,color .2s}
.iconbtn:hover{color:var(--ink);background:color-mix(in oklab, var(--border) 35%, transparent)}
.iconbtn.danger{color:#ef4444}
.iconbtn.is-fav{color:var(--amber)}

/* === ИНПУТЫ ============================================================ */
.input{position:relative;display:flex;align-items:center;min-width:0}
.input--withicon{width:100%}
.input__icon{position:absolute;left:12px;color:var(--muted)}
.input__control{width:100%;padding:12px 14px 12px 40px;border:1px solid var(--border);border-radius:var(--r-md);background:var(--bg-soft);color:var(--ink);outline:none;transition:border-color .2s, background-color .2s}
.input__control:focus{border-color:color-mix(in oklab, var(--accent) 45%, var(--border))}

/* === КАРТОЧКИ ========================================================== */
.cards{display:grid;gap:clamp(12px,1.4vw,18px)}
@media(min-width:560px){.cards{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media(min-width:960px){.cards{grid-template-columns:repeat(3,minmax(0,1fr))}}

.card{border:1px solid var(--border);border-radius:var(--r-lg);background:var(--bg-soft);overflow:hidden;box-shadow:var(--shadow-1)}
.card__media{aspect-ratio:16/9;background:#0f172a}
.card__media img{width:100%;height:100%;object-fit:cover}
.card__body{padding:clamp(14px,1.4vw,18px)}
.card__titlebar{display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
.card__title{margin:0;font-size:clamp(16px,1vw + 12px,20px);font-weight:750}
.card__actions{display:flex;gap:4px}
.muted{color:var(--muted);margin-top:4px}
.small{font-size:12px}
.subtitle{font-weight:650;margin:12px 0 8px}
.grid2{display:grid;gap:clamp(10px,1.4vw,14px)}
@media(min-width:640px){.grid2{grid-template-columns:1fr 1fr}}
.stamp{margin-top:10px;color:var(--muted);font-size:12px}

/* Превью 4 строки + многоточие */
.preview-lines{list-style:none;padding-left:0;margin:10px 0 0 0;color:var(--ink)}
.preview-lines li{list-style:none}
.preview-lines .ellipsis{list-style:none;color:var(--muted)}

/* Бейджи категорий на карточке/деталке */
.badges{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
.badge{font-size:12px;padding:4px 8px;border-radius:9999px;border:1px solid var(--border);background:linear-gradient(180deg, var(--bg) 0%, var(--bg-soft) 100%)}

/* === ФОРМЫ ============================================================= */
.form{display:grid;gap:clamp(12px,1.4vw,16px)}
.field{display:grid;gap:6px}
.label{font-size:14px;font-weight:650}
.control{width:100%;padding:12px 14px;border:1px solid var(--border);border-radius:var(--r-md);background:var(--bg-soft);color:var(--ink);transition:border-color .2s, background-color .2s}
.control:focus{outline:none;border-color:color-mix(in oklab, var(--accent) 45%, var(--border))}
.control.invalid{border-color:#ef4444}
.hint{font-size:12px;color:var(--muted)}
.hint.error{color:#ef4444}

/* chips для выбора категорий */
.chips{display:flex;flex-wrap:wrap;gap:8px}
.chip{padding:8px 12px;border-radius:999px;border:1px solid var(--border);background:var(--bg-soft);cursor:pointer;transition:background-color .2s,border-color .2s,color .2s}
.chip.is-active{border-color:color-mix(in oklab, var(--accent) 60%, var(--border));background:color-mix(in oklab, var(--accent) 12%, var(--bg-soft));color:color-mix(in oklab, var(--accent) 80%, var(--ink))}

.row{display:flex;align-items:center}
.between{justify-content:space-between}
.vstack{display:grid}
.gap{gap:10px}
.mt{margin-top:6px}
.hidden{display:none}
.bullet{width:22px;text-align:right;color:var(--muted)}

/* перестановка пунктов кнопками */
.item{padding:6px 0}
.reorder{display:flex;gap:6px}
.reorder .arrow{padding:6px 8px;border-radius:8px;color:var(--muted);background:color-mix(in oklab, var(--border) 35%, transparent)}
.reorder .arrow:disabled{opacity:.4;cursor:not-allowed}

/* === ЗАГОЛОВКИ / СТАТИСТИКА =========================================== */
.title{font-size:clamp(18px,1.2vw + 14px,22px);font-weight:800;margin-bottom:6px}
.stats{display:grid;grid-template-columns:repeat(3,1fr);gap:clamp(10px,1.5vw,14px);margin-top:10px}
.stat{background:linear-gradient(180deg, color-mix(in oklab, var(--bg) 75%, transparent), var(--bg-soft));border:1px solid var(--border);border-radius:var(--r-md);padding:16px;text-align:center;box-shadow:var(--shadow-1)}
.stat__value{font-size:clamp(18px,1.2vw + 14px,24px);font-weight:800}
.stat__label{font-size:12px;color:var(--muted);margin-top:4px}

.export{margin-top:14px}

/* === НИЖНЯЯ ТАБ-ПАНЕЛЬ ================================================ */
.tabbar{
  position: fixed; left: 0; right: 0; bottom: 0;
  background: rgba(255,255,255,.9);
  backdrop-filter: saturate(120%) blur(10px);
  border-top: 1px solid var(--border);
  z-index: 30;
}
:root[data-theme="dark"] .tabbar{
  background: rgba(14,16,19,.8);
}

.tabbar__grid{
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  position: relative;              /* якорь для кластера */
  min-height: 72px;                /* твоя высота панели (как в измерении 92.8) */
}

.tabbar__cluster{
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: calc(env(safe-area-inset-bottom) + 1px); /* почти самый низ */
  display: flex;
  align-items: center;
  gap: clamp(32px, 6vw, 120px);      /* БОЛЬШЕ расстояние между кнопками */
  padding: 0 8px;                   /* микропаддинг, чтобы не упирались */
}


.tabbar__btn:nth-child(1){ grid-column: 1; }
.tabbar__btn:nth-child(2){ grid-column: 2; }
.tabbar__btn:nth-child(3){ grid-column: 3; }

.tabbar__grid:has(.tabbar__btn:nth-child(4)){
  padding-left: 16px;         /* вернули обычный внутренний отступ */
}

/*display:grid;grid-template-columns:repeat(4,1fr)*/
.tabbar__btn{
  width: 265px;
  padding: 12px 6px;
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  color: var(--muted);
  border: none;
  background: transparent;
}
/*.tabbar__btn{padding:12px 6px;display:flex;flex-direction:column;align-items:center;gap:6px;color:var(--muted);border:none;background:transparent}*/
.tabbar__btn.is-active{color:var(--ink)}

/* === СОСТОЯНИЯ ========================================================= */
.toolbar{display:flex;gap:10px;align-items:center;margin-bottom:12px}
.empty{color:var(--muted);text-align:center;padding:40px 0}

/* ===== Список покупок ===== */
.checklist{list-style:none;margin:10px 0 0 0;padding:0;display:grid;gap:8px}
.checklist li{padding:8px 10px;border:1px solid var(--border);border-radius:12px;background:var(--bg-soft)}
.checklist li.is-done{opacity:.6;text-decoration:line-through}
.checklist input[type="checkbox"]{width:18px;height:18px}
.modal{
  position:fixed; inset:0; z-index:50;
  background:color-mix(in oklab, black 35%, transparent);
  display:flex; align-items:flex-start; justify-content:center;
  padding:24px;
}

:root[data-theme="dark"] .modal{
  background:color-mix(in oklab, black 55%, transparent);
}


.modal__panel{
  width:min(720px, 92vw);
  max-height:min(70vh, 560px);
  display:flex; flex-direction:column;
  background:var(--bg-soft); border:1px solid var(--border);
  border-radius:var(--r-lg); box-shadow:var(--shadow-2);
  padding:14px;
}
.modal__list{
  margin-top:8px; overflow-y:auto;
  border-top:1px solid var(--border);
  border-bottom:1px solid var(--border);
}
.selector__item{
  display:flex; align-items:center; gap:10px;
  padding:10px 4px;
  border-top:1px solid color-mix(in oklab, var(--border) 60%, transparent);
}
.selector__item:first-child{ border-top:0 }
.selector__item:hover{
  background:color-mix(in oklab, var(--border) 35%, transparent);
}
.selector__title{ flex:1 }
.selector__cats{ color:var(--muted); font-size:12px }

.switch{display:inline-flex;align-items:center;gap:10px;cursor:pointer;user-select:none}
.switch input{display:none}
.switch__track{width:46px;height:26px;border-radius:999px;background:color-mix(in oklab, var(--border) 50%, transparent);position:relative;transition:background .2s}
.switch__thumb{position:absolute;top:3px;left:3px;width:20px;height:20px;border-radius:999px;background:var(--bg-soft);box-shadow:var(--shadow-1);transition:left .2s}
.switch input:checked + .switch__track{background:color-mix(in oklab, var(--accent) 55%, var(--bg))}
.switch input:checked + .switch__track .switch__thumb{left:23px}
.switch__text{font-size:14px;color:var(--muted)}

/* статус-бейджи */
.badge.status-done{border-color:#22c55e66;color:#16a34a}
.badge.status-todo{border-color:#9ca3af66;color:#6b7280}

.card__actions--right {
  justify-content: flex-end;
  margin-left: auto;
}

.orders-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.order-item {
  padding: 16px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: var(--card-bg);
}

.order-item.completed {
  opacity: 0.6;
  background: var(--success-light);
}

.order-content {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.order-image {
  width: 80px;
  height: 80px;
  border-radius: 8px;
  overflow: hidden;
  flex-shrink: 0;
}

.order-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.order-details {
  flex: 1;
}

.order-title {
  font-weight: 600;
  margin-bottom: 4px;
  font-size: 1.1em;
}

.order-time {
  font-size: 0.9em;
  color: var(--muted);
}

.order-actions {
  display: flex;
  justify-content: center;
}

.btn-success {
  background: var(--success);
  color: white;
  padding: 8px 20px;
}

.btn-success:hover {
  background: var(--success-dark);
}

.order-completed {
  color: var(--success);
  font-weight: 600;
  text-align: center;
  padding: 8px 0;
}

.orders-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.order-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: var(--card-bg);
}

.order-item.completed {
  opacity: 0.6;
  background: var(--success-light);
}

.order-content {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.order-image {
  width: 60px;
  height: 60px;
  border-radius: 8px;
  overflow: hidden;
  flex-shrink: 0;
}

.order-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.order-info {
  flex: 1;
}

.order-title {
  font-weight: 600;
  margin-bottom: 4px;
  font-size: 1.1em;
}

.order-time {
  font-size: 0.9em;
  color: var(--muted);
}

.order-actions {
  display: flex;
  justify-content: center;
}

.btn-success {
  background: var(--success);
  color: white;
  padding: 8px 16px;
}

.btn-success:hover {
  background: var(--success-dark);
}

.order-completed {
  color: var(--success);
  font-weight: 600;
}

.order-waiting {
  color: var(--muted);
  font-style: italic;
}

.warning-banner {
  background: #fff3cd;
  border: 1px solid #ffeaa7;
  color: #856404;
  padding: 12px;
  border-radius: 8px;
  margin-bottom: 16px;
  text-align: center;
}

.radio {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.radio__checkmark {
  width: 16px;
  height: 16px;
  border: 2px solid var(--border);
  border-radius: 50%;
  display: inline-block;
  position: relative;
}

.radio input:checked + .radio__checkmark::after {
  content: '';
  width: 8px;
  height: 8px;
  background: var(--primary);
  border-radius: 50%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.radio input {
  display: none;
}

.radio__text {
  font-size: 14px;
}


html[data-theme="notebook"] {
  /* Tailwind-переменные (HSL) */
  --background: 30 100% 95%;   /* #fff2e5 */
  --foreground: 24 30% 18%;    /* тёплый тёмный текст */
  --card: 32 100% 97%;         /* #fff9f2 */
  --card-foreground: 24 30% 18%;
  --popover: 32 100% 97%;
  --popover-foreground: 24 30% 18%;
  --secondary: 32 100% 97%;
  --secondary-foreground: 24 30% 18%;
  --muted-foreground: 24 15% 35%;
  --accent: 30 90% 60%;
  --accent-foreground: 24 30% 18%;
  --border: 28 35% 90%;        /* мягкая рамка */
  --input: 28 35% 92%;
  --ring: 30 90% 60%;

  /* Легаси-переменные, если где-то ещё используются */
  --bg: #fff2e5;
  --bg-soft: #fff9f2;
  --ink: #2c2220;
}

/* Фон страницы */
html[data-theme="notebook"] body {
  background-color: #fff2e5 !important;
  color: hsl(var(--foreground));
}

/* Поверхностные элементы в #fff9f2 */
html[data-theme="notebook"] .header,
html[data-theme="notebook"] .card,
html[data-theme="notebook"] .modal__panel,
html[data-theme="notebook"] .tabbar,
html[data-theme="notebook"] .input__control,
html[data-theme="notebook"] .control,
html[data-theme="notebook"] .btn,
html[data-theme="notebook"] .chip,
html[data-theme="notebook"] .checklist li {
  background: #fff9f2;
  border-color: #f2e8de;
}

/* Чуть более читабельные подписи/мьютид-текст */
html[data-theme="notebook"] .muted,
html[data-theme="notebook"] .hint,
html[data-theme="notebook"] .small {
  color: hsl(var(--muted-foreground));
}

/* Хедер — лёгкая «вуаль», чтобы липкий фон не был плотным */
html[data-theme="notebook"] .header {
  background: rgba(255, 249, 242, .9);
  border-bottom-color: #f2e8de;
  backdrop-filter: saturate(120%) blur(10px);
}

/* Таббар — аналогично */
html[data-theme="notebook"] .tabbar {
  background: rgba(255, 249, 242, .95);
  border-top-color: #f2e8de;
}

/* Бэйджи/карточки — мягче границы */
html[data-theme="notebook"] .badge,
html[data-theme="notebook"] .card {
  border-color: #f2e8de;
}

